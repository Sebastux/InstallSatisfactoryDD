---
- name: Nettoyage du serveur.
  ansible.builtin.import_tasks:
    file: nettoyage.yml

- name: Installation des packages.
  ansible.builtin.import_tasks:
    file: commun.yml

- name: Configuration du SSH.
  ansible.builtin.import_tasks:
    file: ssh.yml

- name: Configuration du pare-feu.
  ansible.builtin.import_tasks:
    file: firewalld.yml

- name: Configuration de fail2ban.
  ansible.builtin.import_tasks:
    file: fail2ban.yml

- name: Durcissement du noyau.
  ansible.builtin.import_tasks:
    file: kernel.yml

- name: Durcissement de la politique des mots de passe.
  ansible.builtin.import_tasks:
    file: login_def.yml

- name: DÃ‰sactivation de divers modules du noyau.
  ansible.builtin.import_tasks:
    file: modprobe.yml

- name: Configuration de l'unattended-upgrades.'
  ansible.builtin.import_tasks:
    file: unattended-upgrades.yml

- name: Installation de packages proxmox.
  ansible.builtin.import_tasks:
    file: qemu.yml
  when: ansible_system_vendor is search("QEMU")
