---
- name: DÃ©sactivation de cloud-init.
  ansible.builtin.systemd_service:
    name: cloud-init
    state: stopped
    enabled: false
    masked: true
  ignore_errors: true

- name: Installation des packages.
  ansible.builtin.apt:
    name: "{{ installe_packages }}"
    state: latest
    update_cache: true

- name: Configuration du SSH.
  ansible.builtin.import_tasks:
    file: ssh.yml

- name: Configuration du pare-feu.
  ansible.builtin.import_tasks:
    file: firewalld.yml

- name: Configuration de fail2ban.
  ansible.builtin.import_tasks:
    file: fail2ban.yml

- name: Configuration de l'unattended-upgrades.'
  ansible.builtin.import_tasks:
    file: unattended-upgrades.yml
